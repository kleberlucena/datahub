{% extends "base/base.html" %}
{% load static %}

<!-- styles -->
{% block style_sheet %}
{% comment %} bacinf style_sheet {% endcomment %}
  <link rel="stylesheet" href="{% static 'adminlte-3.1.0/plugins/select2/css/select2.min.css' %}">
  <style>
    .callout-text {
      text-align: justify
    }
    
    /* insert error elemets to fields */
    .errorlist {
      list-style: none; 
      color: red; 
    }

    .display-error {
      border: 1px solid red; 
    }

    /* fix select2 field height */
    .select2-selection,
    .select2-selection--single {
      height: 38px !important;
    }

    #select2-id_aeronave-container {
      height: 38px !important;
    }
  </style>
{% endblock style_sheet %}

<!-- browser title -->
{% block title %} Cadastrar guarnição {% endblock %}

<!-- context title -->
{% block title-header %} Operações aéreas {% endblock %}

<!-- breadcrumb -->
{% block breadcrumb %}
  <li class="breadcrumb-item"><a href="{% url 'rpa_manager:painel' %}">Painel</a></li>
  <li class="breadcrumb-item active">Cadastrar Guarnição</li>
{% endblock %}

<!-- main container -->
{% block content %}

<div class="row">
  <div class="col-md-12">
    <div class="callout callout-info">
      <h3 class="text-info"><i class="fas fa-bullhorn"></i> Atenção ao preenchimento!</h3>
      <p class="callout-text">Neste formulário, insira os usuários que irão compor a guarnição de serviço, o telefone para contato e a cidade de atuação.</p>
      <p class="callout-text">O piloto remoto deve ser diferente do piloto observador, porém ambos podem acumular a função de motorista.</p>
    </div>

    <div class="card card-primary card-outline">
      <div class="card-header">
        <h3 class="card-title">Cadastrar nova guarnição</h3>
      </div>

      <form class="p-3" method='post' enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-row">
          <div class="form-group col-md-12 mb-0">
            <label for="#" class="piloto_observador">Piloto remoto</label>
            <br>{{ user.military.nickname }}<br><hr>
            <label for="id_remote_pilot" class="quem_solicitou">Piloto observador</label>
            {{ form.observer_pilot}}
            {{ form.observer_pilot.errors }}
            <label for="id_driver" class="titulo_operacao">Motorista</label>
            {{ form.driver }}
            {{ form.driver.errors }}
            <label for="id_phone" class="quem_autorizou">Telefone</label>
            {{ form.phone }}
            {{ form.phone.errors }}
            <label for="id_location" class="local">Local</label>
            {{ form.location }}
            {{ form.location.errors }}
            {{ form.remote_pilot }}
          </div>
        </div>
        
        <div class="mt-3">
          <button type="submit" class="btn btn-primary">Salvar</button>
          <a href="{% url 'rpa_manager:painel' %}">
            <button type="button" class="btn btn-warning">Cancelar</button>
          </a>
        </div>
      </form>
    </div>
  </div>


{% endblock content %}

<!-- javascripts -->
{% block js %}
<!-- DataTables  & Plugins -->
  <script src="{% static 'adminlte-3.1.0/plugins/select2/js/select2.min.js' %}"></script>
  <script>
    $(document).ready(function () {
      $('.location_escolha').select2();
      $('.remote_pilot_escolha').select2();
      $('.driver_escolha').select2();
    });
  </script>

  <script>
    const errorList = document.querySelectorAll('ul.errorlist');

    if (errorList) {
      errorList.forEach((element) => element.previousElementSibling.classList.toggle('display-error'));
    }
  </script>

{% endblock %}