{% extends "base/base.html" %}
{% load static %}

<!-- styles -->
{% block style_sheet %}
	{% comment %} bacinf style_sheet {% endcomment %}
	<link rel="stylesheet" href="{% static 'adminlte-3.1.0/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css' %}">
	<link rel="stylesheet" href="{% static 'adminlte-3.1.0/plugins/datatables-responsive/css/responsive.bootstrap4.min.css' %}">
	<link rel="stylesheet" href="{% static 'adminlte-3.1.0/plugins/datatables-buttons/css/buttons.bootstrap4.min.css' %}">
	<link rel="stylesheet" href="{% static 'leaflet/leaflet.css' %}">
{% endblock style_sheet %}

<!-- browser title -->
{% block title %} RPA MANAGER | Painel {% endblock %}

<!-- context title -->
{% block title-header %} Operações aéreas {% endblock %}

<!-- breadcrumb -->
{% block breadcrumb %}
<li class="breadcrumb-item active">Painel</li>
{% endblock %}

<!-- main container -->
{% block content %}
	
	<div class="grid-container">
		<div class="row">
			<div class="col-lg-3 col-6">
				<div class="small-box bg-info">
					<div class="inner">
						<h3>150</h3>
						<p>New Orders</p>
					</div>
					<div class="icon">
						<i class="ion ion-bag"></i>
					</div>
					<a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
				</div>
			</div>

			<div class="col-lg-3 col-6">

				<div class="small-box bg-success">
					<div class="inner">
						<h3>53<sup style="font-size: 20px">%</sup></h3>
						<p>Bounce Rate</p>
					</div>
					<div class="icon">
						<i class="ion ion-stats-bars"></i>
					</div>
					<a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
				</div>
			</div>

			<div class="col-lg-3 col-6">

				<div class="small-box bg-warning">
					<div class="inner">
						<h3>44</h3>
						<p>User Registrations</p>
					</div>
					<div class="icon">
						<i class="ion ion-person-add"></i>
					</div>
					<a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
				</div>
			</div>

			<div class="col-lg-3 col-6">

				<div class="small-box bg-danger">
					<div class="inner">
						<h3>65</h3>
						<p>Unique Visitors</p>
					</div>
					<div class="icon">
						<i class="ion ion-pie-graph"></i>
					</div>
					<a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
				</div>
			</div>

		</div>


		<div class="callout callout-info">
			<h5>I am an info callout!</h5>
			<p>Follow the steps to continue to payment.</p>
		</div> 
</div>

<div id="map" style="height: 500px;"></div>

{% endblock content %}

<!-- javascripts -->
{% block js %}
	<!-- DataTables  & Plugins -->
	<script src="{% static 'adminlte-3.1.0/plugins/datatables/jquery.dataTables.min.js' %}"></script>
	<script src="{% static 'adminlte-3.1.0/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js' %}"></script>
	<script src="{% static 'adminlte-3.1.0/plugins/datatables-responsive/js/dataTables.responsive.min.js' %}"></script>
	<script src="{% static 'adminlte-3.1.0/plugins/datatables-responsive/js/responsive.bootstrap4.min.js' %}"></script>
	<script src="{% static 'adminlte-3.1.0/plugins/datatables-buttons/js/dataTables.buttons.min.js' %}"></script>
	<script src="{% static 'adminlte-3.1.0/plugins/datatables-buttons/js/buttons.bootstrap4.min.js' %}"></script>
	<script src="{% static 'adminlte-3.1.0/plugins/jszip/jszip.min.js' %}"></script>
	<script src="{% static 'adminlte-3.1.0/plugins/pdfmake/pdfmake.min.js' %}"></script>
	<script src="{% static 'adminlte-3.1.0/plugins/pdfmake/vfs_fonts.js' %}"></script>
	<script src="{% static 'adminlte-3.1.0/plugins/datatables-buttons/js/buttons.html5.min.js' %}"></script>
	<script src="{% static 'adminlte-3.1.0/plugins/datatables-buttons/js/buttons.print.min.js' %}"></script>
	<script src="{% static 'adminlte-3.1.0/plugins/datatables-buttons/js/buttons.colVis.min.js' %}"></script>
	<script src="{% static 'adminlte-3.1.0/plugins/select2/js/select2.min.js' %}"></script>
	<script src="{% static 'leaflet/leaflet.js' %}"></script>
	<script type="text/javascript">
		// Função que será executada quando o documento estiver pronto
		document.addEventListener('DOMContentLoaded', function () {
				coordinatesJson = {{ coordinates_json|safe }}
				// Coordenadas do centro do mapa (latitude, longitude)
				var centerCoordinates = [coordinatesJson.latitude, coordinatesJson.longitude]

				// Criação do mapa no elemento div com o ID 'map'
				var map = L.map('map').setView(centerCoordinates, 14);

				// Adicionando uma camada de mapa (neste caso, o OpenStreetMap)
				L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
						attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
				}).addTo(map);
				
				// Adicionando um marcador no mapa
				var marker = L.marker(centerCoordinates).addTo(map);

				// Adicionando um popup ao marcador
				marker.bindPopup(coordinatesJson.titulo + '<br>' +  coordinatesJson.latitude + ',' + coordinatesJson.longitude).openPopup();

				var circle = L.circle(centerCoordinates, {
					color: 'red',
					fillColor: '#f03',
					fillOpacity: 0.1,
					radius: 500
			}).addTo(map);

			
		});
	</script>
{% endblock %}