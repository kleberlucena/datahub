{% extends "base/base.html" %}
{% load static %}

<!-- browser title -->
{% block title %} IMAGE - PROCESAMENTO {% endblock %}

<!-- styles -->
{% block style_sheet %}{% endblock %}

<!-- context title -->
{% block title-header %} Sincronização de UNIDADES - Image > BACINF {% endblock %}

<!-- breadcrumb -->
{% block breadcrumb %}
<li class="breadcrumb-item"><a href="{% url 'base:index' %}">Início</a></li>
<li class="breadcrumb-item active">Progresso da tarefa</li>
{% endblock %}

<!-- main container -->
{% block content %}
<div class="card">
  <div class="card-header">
    <h3 class="card-title"> Progresso da tarefa de sincronização de unidades em que os Images foram cadastradas no SASP</h3>
  </div>
  <div class="card-body">
    <div class="row">
      <div class="col-12">
        <span>Processo em andamento de identificação: {{task_id}}</span>
        <div id="celery-result"></div>
        <div class='progress-wrapper'>
          <div id='progress-bar' class='progress-bar' style="background-color: #68a9ef; width: 0%;">&nbsp;</div>
        </div>
        <div id="progress-bar-message">Aguardando o processo iniciar...</div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

<!-- javascripts -->
{% block js %}
<script src="{% static 'celery_progress/celery_progress.js' %}"></script>
<script>
  $(function () {
    var progressUrl = "{% url 'celery_progress:task_status' task_id %}";
    CeleryProgressBar.initProgressBar(progressUrl)
  });
</script>
{% endblock %}